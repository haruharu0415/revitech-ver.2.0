<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>教員一覧</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style th:replace="~{header :: header-styles}"></style>
    <style>
        .teacher-card-link {
            text-decoration: none;
            color: inherit;
            display: block;
            transition: transform 0.2s ease-in-out;
        }
        .teacher-card-link:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.15);
        }
        .teacher-card {
            background-color: #ffffff;
            border-radius: 0.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .teacher-icon { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; }
        .star-rating .bi { color: #ffc107; }
        .subject-badge { font-size: 0.8em; }
    </style>
</head>
<body class="bg-light">
    
    <div th:replace="~{header :: header-fragment}"></div>

    <main class="container p-3">
        <h1 class="mb-4">教員一覧</h1>

        <div th:if="${!#lists.isEmpty(teacherList)}">
            <div th:each="teacher : ${teacherList}">
                <a th:href="@{/review/{teacherId}(teacherId=${teacher.usersId})}" class="teacher-card-link mb-3">
                    <div class="teacher-card p-3">
                        <div class="row align-items-center w-100">
                            
                            <div class="col-auto">
                                <img th:src="@{/images/default-icon.png}" alt="教員アイコン" class="teacher-icon">
                            </div>

                            <div class="col">
                                <h5 class="mb-1" th:text="${teacher.name}">教員名</h5>
                                <div>
                                    <span th:each="subject : ${teacher.subjects}"
                                          class="badge rounded-pill bg-secondary me-1 subject-badge"
                                          th:text="${subject}"></span>
                                </div>
                            </div>

                            <div class="col-md-3 text-md-center">
                                <div class="star-rating">
                                    <span th:each="i : ${#numbers.sequence(1, teacher.getStarsFull())}"><i class="bi bi-star-fill"></i></span>
                                    <span th:if="${teacher.isHasHalfStar()}"><i class="bi bi-star-half"></i></span>
                                    <span th:each="i : ${#numbers.sequence(1, teacher.getStarsEmpty())}"><i class="bi bi-star"></i></span>
                                </div>
                                <small class="text-muted" th:text="${#numbers.formatDecimal(teacher.averageReviewScore, 1, 1)}"></small>
                            </div>

                            <div class="col-md-3 d-flex justify-content-md-end mt-2 mt-md-0">
                                <a th:href="@{/dm(receiverId=${teacher.usersId})}" class="btn btn-primary" onclick="event.stopPropagation()">DM</a>
                            </div>

                        </div>
                    </div>
                </a>
            </div>
        </div>

        <div th:if="${#lists.isEmpty(teacherList)}" class="alert alert-info">
            現在、登録されている教員はいません。
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>